<Window x:Class="ProbabilityTrades.UI.WPF.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:custom="clr-namespace:ProbabilityTrades.UI.WPF.Views.CustomControls"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:helper="clr-namespace:ProbabilityTrades.UI.WPF.Helper"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:userControls="clr-namespace:ProbabilityTrades.UI.WPF.Views.UserControls"
        xmlns:viewModel="clr-namespace:ProbabilityTrades.UI.WPF.ViewModels"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        mc:Ignorable="d"
        Title="MainWindow"
        x:Name="ApplicationWindow"
        Height="700"
        Width="1350"
        MinWidth="428"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="CanResizeWithGrip"
        WindowStartupLocation="CenterScreen"
        MouseLeftButtonDown="MainWindow_MouseLeftButtonDown"
        Background="Transparent">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibility" />
        <helper:InverseBooleanToVisibilityConverter x:Key="InverseBooleanToVisibility" />

        <DataTemplate DataType="{x:Type viewModel:LoginViewModel}">
            <userControls:LoginView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type viewModel:DashboardViewModel}">
            <userControls:DashboardView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type viewModel:AccountsViewModel}">
            <userControls:AccountsView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type viewModel:SettingsViewModel}">
            <userControls:SettingsView />
        </DataTemplate>
    </Window.Resources>

    <Grid>

        <Border Background="#282D33"
                BorderBrush="#3A4149"
                BorderThickness="5"
                CornerRadius="8,8,0,8" />

        <!-- main views -->
        <Grid Visibility="{Binding IsLoginViewActive, Converter={StaticResource InverseBooleanToVisibility}}"
              Background="#282D33"
              Margin="8">

            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="SideMenuColumn" Width="0.22*" MaxWidth="240" />
                <ColumnDefinition x:Name="ContentColumn"  Width="1*" />
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
                <RowDefinition x:Name="row1" Height="0.1*" MinHeight="65" MaxHeight="75" />
                <RowDefinition x:Name="row2" Height="0.8*" />
                <RowDefinition x:Name="row3"  Height="0.02*" />
            </Grid.RowDefinitions>

            <!-- header -->
            <Button Grid.Row="0"
                    Grid.Column="1"
                    Style="{StaticResource MinAppStyle}" 
                    Command="{Binding MinimizeApplicationCommand}"
                    CommandParameter="{Binding ElementName=ApplicationWindow}" />
            
            <Button Grid.Row="0"
                    Grid.Column="1"
                    Style="{StaticResource MaxAppStyle}"
                    Command="{Binding MaximizeApplicationCommand}"
                    CommandParameter="{Binding ElementName=ApplicationWindow}" />

            <Button Grid.Row="0"
                    Grid.Column="1"
                    Style="{StaticResource CloseAppStyle}"
                    Command="{Binding CloseApplicationCommand}" />

            <!-- navigation menu -->
            <Border Grid.Row="0"
                    Grid.RowSpan="3"
                    Grid.Column="0"
                    Style="{StaticResource SideMenuStyle}">

                <Grid>
                    <TextBlock Grid.Row="0"
                               Grid.Column="0"
                               Text="{Binding LoggedInUser.Username}"
                               Foreground="White"
                               FontFamily="Fonts/#Saira SemiBold"
                               FontSize="16"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Top"
                               Margin="0,60" />

                    <StackPanel Style="{StaticResource MenuStackPanelStyle}">
                        <custom:NavigationMenuButton Style="{StaticResource NavigationMenuButtonStyle}"  
                                                     Content="Dashboard" 
                                                     Command="{Binding ShowDashboardViewCommand}"
                                                     Image="Assets/icons8-dashboard-layout-48.png"
                                                     IsSelected="{Binding IsDashboardSelected, Mode=TwoWay}" />

                        <custom:NavigationMenuButton Style="{StaticResource NavigationMenuButtonStyle}"  
                                                     Content="Accounts"
                                                     Command="{Binding ShowAccountsViewCommand}"
                                                     Image="Assets/icons8-content-64.png"
                                                     IsSelected="{Binding IsAccountsSelected, Mode=TwoWay}" />
                        
                        <custom:NavigationMenuButton Style="{StaticResource NavigationMenuButtonStyle}"   
                                                     Content="Settings" 
                                                     Command="{Binding ShowSettingsViewCommand}"
                                                     Image="Assets/icons8-settings-50.png"
                                                     IsSelected="{Binding IsSettingsSelected, Mode=TwoWay}" />
                    </StackPanel>

                    <TextBlock Text="P R O B A B I L I T Y   T R A D E S"
                               FontFamily="Fonts/#Saira SemiBold"
                               FontSize="14"
                               VerticalAlignment="Bottom"
                               HorizontalAlignment="Center"
                               Foreground="#959FAC"
                               Margin="0,0,10,10" />
                </Grid>
            </Border>

            <!-- main content -->
            <ScrollViewer Grid.Row="1"
                          Grid.Column="1"
                          VerticalScrollBarVisibility="Auto">

                <ContentControl Content="{Binding CurrentViewModel}"
                                Grid.Row="2"
                                Margin="25" />

            </ScrollViewer>

        </Grid>

        <!-- login views -->
        <Grid Visibility="{Binding IsLoginViewActive, Converter={StaticResource BooleanToVisibility}}"
              Margin="8">

            <Grid.RowDefinitions>
                <RowDefinition Height="0.1*" MinHeight="65" MaxHeight="75" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Button Grid.Row="0"
                    Style="{StaticResource CloseAppStyle}"
                    Command="{Binding CloseApplicationCommand}" />

            <ContentControl Grid.Row="1" 
                            Content="{Binding CurrentViewModel}" />
        </Grid>

    </Grid>

</Window>